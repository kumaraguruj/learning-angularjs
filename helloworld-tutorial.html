<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>AngularJS Hello World</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="AngularJS Hello World"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-10-08 18:37:24 EDT"/>
<meta name="author" content="Rudolf Olah"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">AngularJS Hello World</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Before We Begin</a>
<ul>
<li><a href="#sec-1-1">1.1 Requirements</a></li>
<li><a href="#sec-1-2">1.2 Install and Set Up</a>
<ul>
<li><a href="#sec-1-2-1">1.2.1 Install AngularJS</a></li>
<li><a href="#sec-1-2-2">1.2.2 Install the Express web framework, Karma test runner and Jasmine test framework</a></li>
<li><a href="#sec-1-2-3">1.2.3 Setting up the web server</a></li>
<li><a href="#sec-1-2-4">1.2.4 Running the web server</a></li>
<li><a href="#sec-1-2-5">1.2.5 Setting up Karma for Unit Testing</a></li>
<li><a href="#sec-1-2-6">1.2.6 Running the Karma Unit Tests</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-2">2 Learning AngularJS</a>
<ul>
<li><a href="#sec-2-1">2.1 Creating the Hello World module</a></li>
<li><a href="#sec-2-2">2.2 Creating a Controller</a></li>
<li><a href="#sec-2-3">2.3 Unit Testing the Controller</a></li>
<li><a href="#sec-2-4">2.4 Creating a Directive</a></li>
<li><a href="#sec-2-5">2.5 Unit Testing the Directive</a></li>
<li><a href="#sec-2-6">2.6 End to End Testing</a></li>
</ul>
</li>
<li><a href="#sec-3">3 Putting it all together</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Before We Begin</h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Requirements</h3>
<div class="outline-text-3" id="text-1-1">


<p>
Our hello world project has the following requirements:
</p>
<ul>
<li>Node.js and NPM (Node Package Manager)
</li>
<li>AngularJS
</li>
<li>Express web framework
</li>
<li>Karma test runner
</li>
<li>Jasmine test framework
</li>
</ul>


</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Install and Set Up</h3>
<div class="outline-text-3" id="text-1-2">


</div>

<div id="outline-container-1-2-1" class="outline-4">
<h4 id="sec-1-2-1"><span class="section-number-4">1.2.1</span> Install AngularJS</h4>
<div class="outline-text-4" id="text-1-2-1">

<p>Download <a href="http://www.angularjs.org/">AngularJS</a> and place it in the <code>lib/</code> directory. The <code>lib/</code>
directory is where JavaScript and CSS libraries are placed so that we
don't get confused between our code and external code that others have
written.
</p>
<p>
Our JavaScript is in <code>js/</code>, the CSS is in <code>styles/</code> and any images go
into <code>images/</code>.
</p>



<pre class="example">&lt;script src="lib/angular-1.0.8/angular.js"&gt;&lt;/script&gt;
&lt;script src="js/helloworld/app.js"&gt;&lt;/script&gt;
&lt;script src="js/helloworld/controllers.js"&gt;&lt;/script&gt;
</pre>



<pre class="example">&lt;link rel="stylesheet" href="styles/helloworld.css" /&gt;
</pre>


</div>

</div>

<div id="outline-container-1-2-2" class="outline-4">
<h4 id="sec-1-2-2"><span class="section-number-4">1.2.2</span> Install the Express web framework, Karma test runner and Jasmine test framework</h4>
<div class="outline-text-4" id="text-1-2-2">

<p>We create a <code>package.json</code> so that we can list the dependencies of our
project which lets us use <code>npm</code> to automatically install them.
</p>



<pre class="example">{
  "name": "learning-angularjs",
  "version": "0.0.1",
  "private": true,
  "dependencies": {
    "express": "3.4.0",
    "karma": "0.10.2",
    "karma-firefox-launcher": "0.1.0",
    "karma-jasmine": "0.1.3"
  }
}
</pre>


<p>
<a href="http://expressjs.com/">Express</a> is a web framework for Node, we'll be using it to serve up the
templates. <a href="http://karma-runner.github.io/">Karma</a> is a test runner and it uses the <a href="http://pivotal.github.io/jasmine/">Jasmine</a> test
framework. Karma lets us run unit tests and end to end tests. The
Jasmine test framework gives us functions for unit testing.
</p>
<p>
Note: You don't have to use the Express web framework, you can use any
other web server to serve up the tutorial files.
</p></div>

</div>

<div id="outline-container-1-2-3" class="outline-4">
<h4 id="sec-1-2-3"><span class="section-number-4">1.2.3</span> Setting up the web server</h4>
<div class="outline-text-4" id="text-1-2-3">

<p>We need to setup the Express web server to serve up our files. The web
server runs on port 3000.
</p>



<pre class="example">var express = require('express');
var app = express();

// Serves up all files in the current directory
// NOT SAFE FOR PRODUCTION USE, USE ONLY FOR LOCAL DEVELOPMENT AND TESTING
app.use(express.static(__dirname))

app.listen(3000);
</pre>

</div>

</div>

<div id="outline-container-1-2-4" class="outline-4">
<h4 id="sec-1-2-4"><span class="section-number-4">1.2.4</span> Running the web server</h4>
<div class="outline-text-4" id="text-1-2-4">

<p>You can run the web server like this:
</p>



<pre class="example">node app.js
</pre>

</div>

</div>

<div id="outline-container-1-2-5" class="outline-4">
<h4 id="sec-1-2-5"><span class="section-number-4">1.2.5</span> Setting up Karma for Unit Testing</h4>
<div class="outline-text-4" id="text-1-2-5">

<p>Before we can get to unit testing the controller, we have to create
configuration file for Karma.
</p>
<p>
We want to set Karma to use Jasmine as our test framework:
</p>



<pre class="example">'frameworks': [
  'jasmine'
]
</pre>


<p>
And we also want to be able to run the tests within the Firefox and
Chrome browsers if they're available:
</p>



<pre class="example">'browsers': [
  'Chrome',
  'Firefox'
]
</pre>


<p>
We want Karma to watch all of our library, source and unit-test files
and to reload them when they're updated. The order of the files is
important and determines the order they're loaded in. You will want
the AngularJS library to load first, followed by the source code, and
then finally the unit-test files.
</p>



<pre class="example">'files': [
  // Angular files
  'lib/angular-1.0.8/angular.js',
  'lib/angular-1.0.8/angular-cookies.js',
  'lib/angular-1.0.8/angular-loader.js',
  'lib/angular-1.0.8/angular-resource.js',
  'lib/angular-1.0.8/angular-santitize.js',
  'lib/angular-1.0.8/angular-mocks.js',

  // Hello World source code
  'js/helloworld/app.js',
  'js/helloworld/controllers.js',

  // Hello World test files
  'tests/*.js'
]
</pre>


<p>
Here's how it looks put together:
</p>



<pre class="example">module.exports = function (config) {
  config.set({
    'frameworks': [
      'jasmine'
    ],
    'browsers': [
      'Chrome',
      'Firefox'
    ],
    'files': [
      // Angular files
      'lib/angular-1.0.8/angular.js',
      'lib/angular-1.0.8/angular-cookies.js',
      'lib/angular-1.0.8/angular-loader.js',
      'lib/angular-1.0.8/angular-resource.js',
      'lib/angular-1.0.8/angular-santitize.js',
      'lib/angular-1.0.8/angular-mocks.js',

      // Hello World source code
      'js/helloworld/app.js',
      'js/helloworld/controllers.js',

      // Hello World test files
      'tests/*.js'
    ]
  });
};
</pre>


</div>

</div>

<div id="outline-container-1-2-6" class="outline-4">
<h4 id="sec-1-2-6"><span class="section-number-4">1.2.6</span> Running the Karma Unit Tests</h4>
<div class="outline-text-4" id="text-1-2-6">

<p>You can run the unit tests like this:
</p>



<pre class="example">./node_modules/karma/bin/karma start karma.conf.js --auto-watch
</pre>


<p>
If Karma is installed globally, you can run it like this:
</p>



<pre class="example">karma start karma.conf.js --auto-watch
</pre>


<p>
The <code>--auto-watch</code> option will run tests as soon as any source files
have changed. You can add <code>autoWatch: true</code> to the karma configuration
setup so that you don't have to add <code>--auto-watch</code> on the
command-line.
</p></div>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Learning AngularJS</h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Creating the Hello World module</h3>
<div class="outline-text-3" id="text-2-1">

<p>To begin with, we must create a module that represents the whole
app. Creating a module helps us avoid polluting the global namespace.
</p>



<pre class="example">angular.module('helloworldApp', []);
</pre>

</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Creating a Controller</h3>
<div class="outline-text-3" id="text-2-2">

<p>In the scope of the Hello World controller, we have a list of books
and their prices:
</p>



<pre class="example">var books = [
  {
    'title': 'Mastering Web Application Development with AngularJS',
    'price': '35.99'
  },
  {
    'title': 'AngularJS for Dummies',
    'price': '10.95'
  },
  {
    'title': 'Learn AngularJS in 24 Hours',
    'price': '29.00'
  }
];

$scope.books = books;
</pre>


<p>
The list of books can be sorted by the title or the price. Books that
include <code>booksTitleContains</code> in their title will be visible, we're
going to use an empty string or null to specify whether to search the
books by title or to display all books in the list.
</p>



<pre class="example">$scope.booksSortedBy = 'title';
$scope.booksTitleContains = '';
</pre>


<p>
And then this is how we get a list of books that has been searched and
then sorted:
</p>



<pre class="example">var searchAndSortBooks = function () {
  var i;
  var book;
  var result = [];
  for (i = 0; i &lt; books.length; i++) {
    book = books[i];
    // TODO: logic for searching
    result.push(books[i]);
  }
  // TODO: sort the books
  $scope.books = result;
};
</pre>


<p>
When either the <code>booksSortedBy</code> or <code>booksTitleContains</code> scope
variables change, we trigger the function and update the list of books
that are displayed.
</p>
<p>
We create the controller as part of the <code>helloworldApp</code> module. We
specify the <code>$scope</code> as a dependency and then we pass in a function
that defines the controller.
</p>



<pre class="example">angular.module('helloworldApp').controller(
  'HelloworldCtrl',   // name of the controller
  [
    '$scope',         // DI (Dependency Injection) modules
    function ($scope) { // definition of the controller
      var books = [
        {
          'title': 'Mastering Web Application Development with AngularJS',
          'price': '35.99'
        },
        {
          'title': 'AngularJS for Dummies',
          'price': '10.95'
        },
        {
          'title': 'Learn AngularJS in 24 Hours',
          'price': '29.00'
        }
      ];

      $scope.books = books;
      $scope.booksSortedBy = 'title';
      $scope.booksTitleContains = '';
      var searchAndSortBooks = function () {
        var i;
        var book;
        var result = [];
        for (i = 0; i &lt; books.length; i++) {
          book = books[i];
          // TODO: logic for searching
          result.push(books[i]);
        }
        // TODO: sort the books
        $scope.books = result;
      };
    }
  ]
);
</pre>


</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Unit Testing the Controller</h3>
<div class="outline-text-3" id="text-2-3">

<p>There are a few moving parts in our controller; we can sort the list
of books, and we can search for them by title. We need to test both of
these to make sure that they work and we can do this manually, by
loading up the page and clicking on and off different buttons and
visually confirming that the list of books is correct.
</p>
<p>
This can quickly become tedious when you start adding many more
controllers. So we want to automate the testing by writing some unit
tests.
</p>
<p>
Before each test we want to setup the controller:
</p>



<pre class="example">var $scope;
var ctrl;

beforeEach(module('helloworldApp'));

beforeEach(inject(function ($rootScope, $controller) {
  $scope = $rootScope.$new();
  ctrl = $controller('HelloworldCtrl', { $scope: $scope });
}));
</pre>


<p>
The <code>module</code> and <code>inject</code> functions are defined at the global level
and within the <code>angular</code> object. The <a href="http://docs.angularjs.org/api/angular.mock.module">module</a> function gets the module
prepared for testing. The <a href="http://docs.angularjs.org/api/angular.mock.inject">inject</a> function injects dependencies which
provide the functionality required, it allows mock objects to be used
when testing.
</p>
<p>
The <code>$rootScope</code> dependency provides the function to define a new
scope for the controller. The <code>$controller</code> dependency provides a way
to look up and create an instance of a controller.
</p>
<p>
Here's how we test to make sure that the controller, <code>HelloworldCtrl</code>,
exists in the module, <code>helloworldApp</code>:
</p>



<pre class="example">it('should have a HelloworldCtrl controller', function () {
  expect(helloworldApp.HelloworldCtrl).not.to.equal(null);
});
</pre>


<p>
Here's how we test the book sorting:
</p>



<pre class="example">it('sorts books by title in ascending order', function () {
  var i;
  scope.booksSortedBy = 'title-ascending';
  for (i = 0; i &lt; scope.books.length - 1; i++) {
    expect(scope.books[i].title).toBeLessThan(scope.books[i + 1].title);
  }
});

it('sorts books by title in descending order', function () {
  var i;
  scope.booksSortedBy = 'title-descending';
  for (i = 0; i &lt; scope.books.length - 1; i++) {
    expect(scope.books[i].title).toBeGreaterThan(scope.books[i + 1].title);
  }
});

it('sorts books by price in ascending order', function () {
});

it('sorts books by price in descending order', function () {
});
</pre>


<p>
And here's how we test book searching:
</p>



<pre class="example">it('lists all books when searching for null or an empty string', function () {
});

it('lists only books that contain the search string in their title', function () {
});
</pre>



<pre class="example">describe('Hello World Controller', function () {
  var $scope;
  var ctrl;

  beforeEach(module('helloworldApp'));

  beforeEach(inject(function ($rootScope, $controller) {
    $scope = $rootScope.$new();
    ctrl = $controller('HelloworldCtrl', { $scope: $scope });
  }));

  it('should have a HelloworldCtrl controller', function () {
    expect(helloworldApp.HelloworldCtrl).not.to.equal(null);
  });

  it('sorts books by title in ascending order', function () {
    var i;
    scope.booksSortedBy = 'title-ascending';
    for (i = 0; i &lt; scope.books.length - 1; i++) {
      expect(scope.books[i].title).toBeLessThan(scope.books[i + 1].title);
    }
  });

  it('sorts books by title in descending order', function () {
    var i;
    scope.booksSortedBy = 'title-descending';
    for (i = 0; i &lt; scope.books.length - 1; i++) {
      expect(scope.books[i].title).toBeGreaterThan(scope.books[i + 1].title);
    }
  });

  it('sorts books by price in ascending order', function () {
  });

  it('sorts books by price in descending order', function () {
  });

  it('lists all books when searching for null or an empty string', function () {
  });

  it('lists only books that contain the search string in their title', function () {
  });
});
</pre>

</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Creating a Directive</h3>
<div class="outline-text-3" id="text-2-4">

</div>

</div>

<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> Unit Testing the Directive</h3>
<div class="outline-text-3" id="text-2-5">

</div>

</div>

<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> End to End Testing</h3>
<div class="outline-text-3" id="text-2-6">

</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Putting it all together</h2>
<div class="outline-text-2" id="text-3">




<pre class="example">&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Hello Angular.JS&lt;/title&gt;
  &lt;link rel="stylesheet" href="lib/bootstrap-x.y.z.css" /&gt;
  &lt;link rel="stylesheet" href="styles/helloworld.css" /&gt;
  &lt;script src="lib/angular-1.0.8/angular.js"&gt;&lt;/script&gt;
  &lt;script src="js/helloworld/app.js"&gt;&lt;/script&gt;
  &lt;script src="js/helloworld/controllers.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>

</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2013-10-08 18:37:24 EDT</p>
<p class="author">Author: Rudolf Olah</p>
<p class="creator">Org version 7.8.11 with Emacs version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
